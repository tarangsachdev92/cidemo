/*
 * AllInOne Banner - Banner With Thumbnails v3.0
 *
 * Copyright 2012, LambertGroup
 * 
*/


(function(c){function J(a,b){c(a.currentImg.attr("data-text-id")).css("display","block");var h=c(a.currentImg.attr("data-text-id")).children(),e=0;currentText_arr=[];h.each(function(){currentText_arr[e]=c(this);var f=currentText_arr[e].attr("data-initial-left"),h=currentText_arr[e].attr("data-initial-top");b.responsive&&(f=parseInt(f/(b.origWidth/b.width),10),h=parseInt(h/(b.origWidth/b.width),10));currentText_arr[e].css({left:f+"px",top:h+"px",opacity:parseInt(currentText_arr[e].attr("data-fade-start"), 10)/100});var k=currentText_arr[e];setTimeout(function(){if(b.responsive){newCss="";if(k.css("font-size").lastIndexOf("px")!=-1){fontSize=k.css("font-size").substr(0,k.css("font-size").lastIndexOf("px"));newCss=newCss+("font-size:"+fontSize/(b.origWidth/b.width)+"px;")}else if(k.css("font-size").lastIndexOf("em")!=-1){fontSize=k.css("font-size").substr(0,k.css("font-size").lastIndexOf("em"));newCss=newCss+("font-size:"+fontSize/(b.origWidth/b.width)+"em;")}if(k.css("line-height").lastIndexOf("px")!= -1){lineHeight=k.css("line-height").substr(0,k.css("line-height").lastIndexOf("px"));newCss=newCss+("line-height:"+lineHeight/(b.origWidth/b.width)+"px;")}else if(k.css("line-height").lastIndexOf("em")!=-1){lineHeight=k.css("line-height").substr(0,k.css("line-height").lastIndexOf("em"));newCss=newCss+("line-height:"+lineHeight/(b.origWidth/b.width)+"em;")}k.wrapInner('<div class="newFS" style="'+newCss+'" />')}var f=k.attr("data-final-left"),h=k.attr("data-final-top");if(b.responsive){f=parseInt(f/ (b.origWidth/b.width),10);h=parseInt(h/(b.origWidth/b.width),10)}var g=1;a.isVideoPlaying==true&&(g=0);k.animate({opacity:g,left:f+"px",top:h+"px"},k.attr("data-duration")*1E3,function(){a.isVideoPlaying==true&&c(a.currentImg.attr("data-text-id")).children().css("opacity",0)})},1E3*currentText_arr[e].attr("data-delay"));e++})}function K(a,b){nowx=(new Date).getTime();!a.mouseOverBanner&&(!a.effectIsRunning&&b.showCircleTimer)&&(a.ctx.clearRect(0,0,a.canvas.width,a.canvas.height),a.ctx.beginPath(), a.ctx.globalAlpha=b.behindCircleAlpha/100,a.ctx.arc(b.circleRadius+2*b.circleLineWidth,b.circleRadius+2*b.circleLineWidth,b.circleRadius,0,2*Math.PI,!1),a.ctx.lineWidth=b.circleLineWidth+2,a.ctx.strokeStyle=b.behindCircleColor,a.ctx.stroke(),a.ctx.beginPath(),a.ctx.globalAlpha=b.circleAlpha/100,a.ctx.arc(b.circleRadius+2*b.circleLineWidth,b.circleRadius+2*b.circleLineWidth,b.circleRadius,0,2*((a.timeElapsed+nowx-a.arcInitialTime)/1E3)/b.autoPlay*Math.PI,!1),a.ctx.lineWidth=b.circleLineWidth,a.ctx.strokeStyle= b.circleColor,a.ctx.stroke())}function L(a,b,h){c(".stripe",a).remove();c(".block",a).remove();E=z=Math.round(b.width/b.numberOfStripes);for(var e=!0,f=0;f<b.numberOfStripes;f++)f==b.numberOfStripes-1&&(E=a.width()-z*(b.numberOfStripes-1)),!b.responsive||!c.browser.msie||c.browser.msie&&9<=c.browser.version?-1!=x.indexOf("ipad")||-1!=x.indexOf("iphone")||-1!=x.indexOf("ipod")||-1!=x.indexOf("webos")?e=!1:a.append(c('<div class="stripe"></div>').css({opacity:"0",left:z*f+"px",width:E+"px",height:"0px", background:'url("'+h.current_imgInside.attr("src")+'") '+-1*f*z+"px 0%"})):e=!1,e||(mleft=-1*z*f,a.append(c('<div class="stripe"><img src="'+h.current_imgInside.attr("src")+'" width="'+b.width+'" height="'+b.height+'" style="margin-left:'+mleft+'px;"></div>').css({opacity:"0",left:z*f+"px",width:E+"px",height:"0px"})));b.responsive&&e&&(!c.browser.msie||c.browser.msie&&9<=c.browser.version)&&c(".stripe",a).css({"-webkit-background-size":b.width+"px "+b.height+"px","-moz-background-size":b.width+"px "+ b.height+"px","-o-background-size":b.width+"px "+b.height+"px","-ms-background-size":b.width+"px "+b.height+"px","background-size":b.width+"px "+b.height+"px"})}function I(a,b,c,e,f){var v=a.width(),k=a.height();a.css({width:"0"});a.css({height:"0"});b==e.numberOfRows-1&&c==e.numberOfColumns-1?setTimeout(function(){a.animate({opacity:"1.0",width:v,height:k},1E3*e.effectDuration/3,"",function(){f.trigger("effectComplete")})},s):setTimeout(function(){a.animate({opacity:"1.0",width:v,height:k},1E3*e.effectDuration/ 3)},s);s+=G}function F(a,b,c,e,f,v,k,n){B=b.css("left").substr(0,b.css("left").lastIndexOf("px"));1===a||-1===a?(n.isCarouselScrolling=!0,b.css("opacity","0.5"),b.animate({opacity:1,left:"+="+a*n.carouselStep},500,"easeOutCubic",function(){M(n,b,c,e,f,v,k);n.isCarouselScrolling=!1})):B!=-1*Math.floor(n.current_img_no/f.numberOfThumbsPerScreen)*n.carouselStep&&(n.isCarouselScrolling=!0,b.css("opacity","0.5"),b.animate({opacity:1,left:-1*Math.floor(n.current_img_no/f.numberOfThumbsPerScreen)*n.carouselStep}, 500,"easeOutCubic",function(){M(n,b,c,e,f,v,k);n.isCarouselScrolling=!1}))}function M(a,b,c,e,f,v,k){B=b.css("left").substr(0,b.css("left").lastIndexOf("px"));0>B?c.hasClass("carouselLeftNavDisabled")&&c.removeClass("carouselLeftNavDisabled"):c.addClass("carouselLeftNavDisabled");Math.abs(B-a.carouselStep)<(k.width()+a.thumbMarginLeft)*v?e.hasClass("carouselRightNavDisabled")&&e.removeClass("carouselRightNavDisabled"):e.addClass("carouselRightNavDisabled")}function C(a,b,h,e,f,v,k,n,u,g,m,p){var r= !0;if(!g.loop&&b.current_img_no+a>=m||!g.loop&&0>b.current_img_no+a)r=!1;if(r){c(".newFS",e).contents().unwrap();b.arcInitialTime=(new Date).getTime();b.timeElapsed=0;g.showCircleTimer&&(b.ctx.clearRect(0,0,b.canvas.width,b.canvas.height),b.ctx.beginPath(),b.ctx.globalAlpha=g.behindCircleAlpha/100,b.ctx.arc(g.circleRadius+2*g.circleLineWidth,g.circleRadius+2*g.circleLineWidth,g.circleRadius,0,2*Math.PI,!1),b.ctx.lineWidth=g.circleLineWidth+2,b.ctx.strokeStyle=g.behindCircleColor,b.ctx.stroke(),b.ctx.beginPath(), b.ctx.globalAlpha=g.circleAlpha/100,b.ctx.arc(g.circleRadius+2*g.circleLineWidth,g.circleRadius+2*g.circleLineWidth,g.circleRadius,0,0,!1),b.ctx.lineWidth=g.circleLineWidth,b.ctx.strokeStyle=g.circleColor,b.ctx.stroke());c(b.currentImg.attr("data-text-id")).css("display","none");c(f[b.current_img_no]).removeClass("thumbsHolder_ThumbON");g.randomizeImages&&!b.bottomNavClicked?(a=Math.floor(Math.random()*m),b.current_img_no=b.current_img_no===a?Math.floor(Math.random()*m):a):b.current_img_no=b.current_img_no+ a>=m?0:0>b.current_img_no+a?m-1:b.current_img_no+a;b.bottomNavClicked=!1;c(f[b.current_img_no]).addClass("thumbsHolder_ThumbON");B=k.css("left").substr(0,k.css("left").lastIndexOf("px"));0===b.current_img_no||b.current_img_no===m-1?F(0,k,n,u,g,m,p,b):F(1001,k,n,u,g,m,p,b);b.currentImg=c(v[b.current_img_no]);b.current_imgInside=b.currentImg.find("img:first");b.currentImg.attr("data-transition")?(h=b.currentImg.attr("data-transition"),"random"==h&&(h=H[Math.floor(Math.random()*H.length)])):h="random"!= g.defaultEffect?g.defaultEffect:H[Math.floor(Math.random()*H.length)];b.effectIsRunning=!0;if("fade"==h||"slideFromLeft"==h||"slideFromRight"==h||"slideFromTop"==h||"slideFromBottom"==h)if(L(e,g,b),f=c(".stripe:first",e),"fade"==h&&(f.css({top:"0px",height:"100%",width:e.width()+"px"}),f.animate({opacity:"1.0"},2E3*g.effectDuration,"",function(){e.trigger("effectComplete")})),"slideFromLeft"==h&&(f.css({top:"0px",height:"100%",width:"0"}),f.animate({opacity:"1.0",width:e.width()+"px"},1E3*g.effectDuration, "",function(){e.trigger("effectComplete")})),"slideFromRight"==h&&(f.css({top:"0px",height:"100%",width:"0",left:e.width()+5+"px"}),f.animate({opacity:"1.0",left:"0",width:e.width()+"px"},1E3*g.effectDuration,"",function(){e.trigger("effectComplete")})),"slideFromTop"==h&&(f.css({top:"0px",height:"0",width:e.width()+"px"}),f.animate({opacity:"1.0",height:e.height()+"px"},1E3*g.effectDuration,"",function(){e.trigger("effectComplete")})),"slideFromBottom"==h)f.css({top:"0px",height:"0",width:e.width()+ "px",top:e.height()+"px"}),f.animate({opacity:"1.0",top:0,height:e.height()+"px"},1E3*g.effectDuration,"",function(){e.trigger("effectComplete")});0<=h.indexOf("Stripes")&&(L(e,g,b),f=0<=h.indexOf("Reverse")?c(".stripe",e).myReverse():c(".stripe",e),s=100,i=0,f.each(function(){var a=c(this);(h=="topBottomDroppingStripes"||h=="topBottomDroppingReverseStripes")&&a.css({top:"0px"});(h=="bottomTopDroppingStripes"||h=="bottomTopDroppingReverseStripes")&&a.css({bottom:"0px"});(h=="leftRightFadingStripes"|| h=="leftRightFadingReverseStripes")&&a.css({top:"0px",height:"100%",width:"0"});h=="asynchronousDroppingStripes"&&(i%2?a.css({top:"0px"}):a.css({bottom:"0px"}));if(h=="leftRightFadingStripes"||h=="leftRightFadingReverseStripes"){var b=z;if(h=="leftRightFadingStripes"&&i==g.numberOfStripes-1||h=="leftRightFadingReverseStripes"&&i==0)b=E;i==g.numberOfStripes-1?setTimeout(function(){a.animate({width:b+"px",opacity:"1.0"},g.effectDuration*800,"",function(){e.trigger("effectComplete")})},s):setTimeout(function(){a.animate({width:b+ "px",opacity:"1.0"},g.effectDuration*800)},s)}else i==g.numberOfStripes-1?setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},g.effectDuration*1E3,"",function(){e.trigger("effectComplete")})},s):setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},g.effectDuration*1E3)},s);s=s+O;i++}));if(0<=h.indexOf("Blocks")){c(".stripe",e).remove();c(".block",e).remove();f=Math.round(g.width/g.numberOfColumns);v=Math.round(g.height/g.numberOfRows);k=f;n=v;m=u=0;p=!0;for(a=0;a<g.numberOfRows;a++)for(r= 0;r<g.numberOfColumns;r++)u=f*r,m=v*a,k=r==g.numberOfColumns-1?g.width-f*(g.numberOfColumns-1):f,n=a==g.numberOfRows-1?g.height-v*(g.numberOfRows-1):v,!g.responsive||!c.browser.msie||c.browser.msie&&9<=c.browser.version?-1!=x.indexOf("ipad")||-1!=x.indexOf("iphone")||-1!=x.indexOf("ipod")||-1!=x.indexOf("webos")?p=!1:e.append(c('<div class="block"></div>').css({opacity:"0",left:u+"px",top:m+"px",width:k+"px",height:n+"px",background:'url("'+b.current_imgInside.attr("src")+'") -'+u+"px -"+m+"px"})): p=!1,p||(mleft=-1*u,mtop=-1*m,e.append(c('<div class="block"><img src="'+b.current_imgInside.attr("src")+'" width="'+g.width+'" height="'+g.height+'" style="margin-left:'+mleft+"px; margin-top:"+mtop+'px;"></div>').css({opacity:"0",left:u+"px",top:m+"px",width:k+"px",height:n+"px"})));g.responsive&&p&&(!c.browser.msie||c.browser.msie&&9<=c.browser.version)&&c(".block",e).css({"-webkit-background-size":g.width+"px "+g.height+"px","-moz-background-size":g.width+"px "+g.height+"px","-o-background-size":g.width+ "px "+g.height+"px","-ms-background-size":g.width+"px "+g.height+"px","background-size":g.width+"px "+g.height+"px"});if(0<=h.indexOf("Reverse"))var w=c(".block",e).myReverse();else if("randomBlocks"==h){for(var b=c(".block",e),t,f=b.length;f;w=parseInt(Math.random()*f,10),t=b[--f],b[f]=b[w],b[w]=t);w=b}else w=c(".block",e);s=100;if("randomBlocks"==h){i=0;var d=g.numberOfRows*g.numberOfColumns;w.each(function(){var a=c(this),b=a.width(),f=a.height();a.css({width:"0"});a.css({height:"0"});i==d-1?setTimeout(function(){a.animate({opacity:"1.0", width:b,height:f},g.effectDuration*1E3/3,"",function(){e.trigger("effectComplete")})},s):setTimeout(function(){a.animate({opacity:"1.0",width:b,height:f},g.effectDuration*1E3/3)},s);s=s+G;i++})}else{var o=0,l=0,D=[];D[o]=[];w.each(function(){D[o][l]=c(this);l++;if(l==g.numberOfColumns){o++;l=0;D[o]=[]}});l=o=0;s=100;w=c(D[o][l]);for(I(w,0,0,g,e);o<g.numberOfRows-1||l<g.numberOfColumns-1;){o<g.numberOfRows-1&&o++;l<g.numberOfColumns-1&&l++;i=o;l<o&&g.numberOfRows>g.numberOfColumns&&(i=o-l);j=0;for(o< l&&g.numberOfRows<g.numberOfColumns&&(j=l-o);0<=i&&j<=l;)w=c(D[i--][j++]),I(w,i,j,g,e)}s=g.numberOfRows<g.numberOfColumns?s-(g.numberOfRows-1)*G:s-(g.numberOfColumns-1)*G;limit_i=0;for(limit_j=l-o;limit_i<o&&limit_j<l;){i=o+1;for(j=limit_j;i>limit_i&&j<l;)i-=1,j+=1,w=c(D[i][j]),I(w,i,j,g,e);limit_i++;limit_j++}}}}}function N(a,b,h,e,f,v,k,n,u,g,m){"opportune"!=b.skin&&(m.css({top:b.height+"px","margin-top":parseInt(b.thumbsWrapperMarginTop/(b.origWidth/b.width),10)+"px",height:parseInt(b.origthumbsHolderWrapperH/ (b.origWidth/b.width),10)+"px"}),bgTopCorrection=0,1==b.origWidth/b.width&&0<b.thumbsReflection&&(bgTopCorrection=-7),k.css("background-position","0px "+((m.height()-b.origthumbsHolderWrapperH)/2+bgTopCorrection)+"px"),n.css("background-position","0px "+((m.height()-b.origthumbsHolderWrapperH)/2+bgTopCorrection)+"px"),g.css("width",b.width-k.width()-n.width()),b.origWidthThumbsHolderVisibleWrapper=b.origWidth-k.width()-n.width(),f.css({width:parseInt(b.origThumbW/(b.origWidthThumbsHolderVisibleWrapper/ g.width()),10)+"px",height:parseInt(b.origThumbH/(b.origWidthThumbsHolderVisibleWrapper/g.width()),10)+"px"}),b.numberOfThumbsPerScreen>=h&&g.css("left",parseInt((m.width()-(u.width()+a.thumbMarginLeft)*h)/2,10)+parseInt(a.thumbMarginLeft/2,10)+"px"),h=c(".thumbsHolder_ThumbOFF",e).find("img:first"),0<b.thumbsReflection&&h.unreflect(),h.css({width:f.width()+"px",height:f.height()+"px","margin-top":parseInt((m.height()-f.height())/2,10)+bgTopCorrection+"px"}),1==b.origWidth/b.width&&0<b.thumbsReflection&& h.reflect({opacity:b.thumbsReflection/100}),a.thumbMarginLeft=Math.floor((m.width()-k.width()-n.width()-u.width()*b.numberOfThumbsPerScreen)/(b.numberOfThumbsPerScreen-1)),thumb_i=-1,v.children().each(function(){thumb_i++;theThumb=c(this);theThumb.css("background-position","center "+b.thumbsOnMarginTop/(b.origWidth/b.width)+"px");0>=thumb_i?theThumb.css("margin-left",Math.floor((m.width()-k.width()-n.width()-(a.thumbMarginLeft+theThumb.width())*(b.numberOfThumbsPerScreen-1)-theThumb.width())/2)+"px"): theThumb.css("margin-left",a.thumbMarginLeft+"px")}),a.carouselStep=(u.width()+a.thumbMarginLeft)*b.numberOfThumbsPerScreen)}var H="fade slideFromLeft slideFromRight slideFromTop slideFromBottom topBottomDroppingStripes topBottomDroppingReverseStripes bottomTopDroppingStripes bottomTopDroppingReverseStripes asynchronousDroppingStripes leftRightFadingStripes leftRightFadingReverseStripes topBottomDiagonalBlocks topBottomDiagonalReverseBlocks randomBlocks".split(" "),z,E,s=100,O=50,G=25,A=!1,B=0,x= navigator.userAgent.toLowerCase();c.fn.allinone_thumbnailsBanner=function(a){a=c.extend({},c.fn.allinone_thumbnailsBanner.defaults,a);return this.each(function(){var b=c(this);responsiveWidth=b.parent().width();responsiveHeight=b.parent().height();a.responsiveRelativeToBrowser&&(responsiveWidth=c(window).width(),responsiveHeight=c(window).height());a.origWidth=a.width;a.width100Proc&&(a.width=responsiveWidth);a.origHeight=a.height;a.height100Proc&&(a.height=responsiveHeight);if(a.responsive&&(a.origWidth!= responsiveWidth||a.width100Proc))a.width=a.origWidth>responsiveWidth||a.width100Proc?responsiveWidth:a.origWidth,a.height100Proc||(a.height=a.width/(a.origWidth/a.origHeight));a.width=parseInt(a.width,10);a.height=parseInt(a.height,10);a.enableTouchScreen&&a.responsive&&(a.width-=1);b.css("display","block");var h=c("<div></div>").addClass("allinone_thumbnailsBanner").addClass(a.skin),e=c('<div class="bannerControls"> <div class="leftNav"></div> <div class="rightNav"></div> </div> <div class="contentHolderVisibleWrapper"><div class="contentHolder"></div></div> <div class="thumbsHolderWrapper"><div class="thumbsHolderVisibleWrapper"><div class="thumbsHolder"></div></div></div> <canvas class="mycanvas"></canvas>'); b.wrap(h);b.after(e);a.showAllControllers||v.css("display","none");var f=b.parent(".allinone_thumbnailsBanner"),v=c(".bannerControls",f),k=c(".leftNav",f),n=c(".rightNav",f);k.css("display","none");n.css("display","none");a.showNavArrows&&a.showOnInitNavArrows&&(k.css("display","block"),n.css("display","block"));var u=c(".thumbsHolderWrapper",f),g=c(".thumbsHolderVisibleWrapper",f),m=c(".thumbsHolder",f),p,r;p=c('<div class="carouselLeftNav"></div>');r=c('<div class="carouselRightNav"></div>');u.append(p); u.append(r);r.css("right","0");m.css("width",p.width()+"px");(!a.showThumbs||!a.showOnInitThumbs)&&u.css("display","none");var w=a.defaultEffect,t=0,d={current_img_no:0,currentImg:0,current_imgInside:"",windowWidth:0,carouselStep:0,thumbMarginLeft:0,bottomNavClicked:!1,effectIsRunning:!1,mouseOverBanner:!1,timeoutID:"",intervalID:"",arcInitialTime:(new Date).getTime(),timeElapsed:0,windowWidth:0,canvas:"",ctx:"",bannerRatio:a.origWidth/a.origHeight};d.canvas=c(".mycanvas",f)[0];d.canvas.width=2*a.circleRadius+ 4*a.circleLineWidth;d.canvas.height=2*a.circleRadius+4*a.circleLineWidth;a.showCircleTimer&&(c.browser.msie&&9>parseInt(c.browser.version,10)&&(d.canvas=G_vmlCanvasManager.initElement(d.canvas),!a.showCircleTimerIE8IE7&&a.showCircleTimer&&(a.showCircleTimer=!1)),d.ctx=d.canvas.getContext("2d"));f.width(a.width);f.height(a.height);v.css("margin-top",parseInt((a.height-k.height())/2,10)+"px");var o=b.find("ul:first").children(),l,s=0;o.each(function(){d.currentImg=c(this);if(!d.currentImg.is("li"))d.currentImg= d.currentImg.find("li:first");if(d.currentImg.is("li")){d.currentImg.css("display","none");t++;var b=c(o[t-1]).attr("data-bottom-thumb");l=c('<div class="thumbsHolder_ThumbOFF" rel="'+(t-1)+'"><img src="'+b+'"></div>');m.append(l);if(a.origThumbW==0){if(a.numberOfThumbsPerScreen==0)a.numberOfThumbsPerScreen=Math.floor((a.origWidth-p.width()-r.width())/l.width());a.origThumbW=l.width();a.origThumbH=l.height();a.origthumbsHolderWrapperH=u.height();d.thumbMarginLeft=Math.floor((a.origWidth-p.width()- r.width()-l.width()*a.numberOfThumbsPerScreen)/(a.numberOfThumbsPerScreen-1))}m.css("width",m.width()+d.thumbMarginLeft+l.width()+"px");t<=1?l.css("margin-left",Math.floor((u.width()-p.width()-r.width()-(d.thumbMarginLeft+l.width())*(a.numberOfThumbsPerScreen-1)-l.width())/2)+"px"):l.css("margin-left",d.thumbMarginLeft+"px");s=parseInt((u.height()-parseInt(l.css("height").substring(0,l.css("height").length-2)))/2,10)}});g.css("width",g.width()-p.width()-r.width());g.css("left",p.width());d.carouselStep= (l.width()+d.thumbMarginLeft)*a.numberOfThumbsPerScreen;0===Math.floor(d.current_img_no/a.numberOfThumbsPerScreen)&&p.addClass("carouselLeftNavDisabled");Math.floor(d.current_img_no/a.numberOfThumbsPerScreen)==Math.floor(t/a.numberOfThumbsPerScreen)&&r.addClass("carouselRightNavDisabled");0<a.thumbsReflection&&(s-=7);h=c(".thumbsHolder_ThumbOFF",f).find("img:first");h.css("margin-top",s+"px");g.css({width:a.origWidth-p.width()-r.width(),left:p.width()+"px"});d.carouselStep=(l.width()+d.thumbMarginLeft)* a.numberOfThumbsPerScreen;p.addClass("carouselLeftNavDisabled");a.numberOfThumbsPerScreen>=t&&(r.addClass("carouselRightNavDisabled"),p.css("display","none"),r.css("display","none"),g.css("left",parseInt((u.width()-(l.width()+d.thumbMarginLeft)*t)/2,10)+"px"));u.css("top",a.height+"px");h=c(".thumbsHolder_ThumbOFF",f).find("img:first");h.css("margin-top",s+"px");a.origthumbsHolder_MarginTop=s;var y=c(".thumbsHolder_ThumbOFF",f);N(d,a,t,f,y,m,p,r,l,g,u);d.current_img_no=a.firstImg;a.firstImg>t&&(d.current_img_no= t);0>a.firstImg&&(d.current_img_no=0);a.randomizeImages&&(d.current_img_no=Math.floor(Math.random()*t));if(d.current_img_no>=a.numberOfThumbsPerScreen)for(q=0;q<Math.floor(d.current_img_no/a.numberOfThumbsPerScreen);q++)F(-1,m,p,r,a,t,l,d);d.currentImg=c(o[d.current_img_no]);d.current_imgInside=d.currentImg.find("img:first");-1!=x.indexOf("ipad")||-1!=x.indexOf("iphone")||-1!=x.indexOf("ipod")||-1!=x.indexOf("webos")||c.browser.msie&&7>=c.browser.version?f.append('<img id="curBgImgIos" src="'+d.current_imgInside.attr("src")+ '" width="'+a.width+'" height="'+a.height+'">'):(f.css("background",'url("'+d.current_imgInside.attr("src")+'") no-repeat'),a.responsive&&(!c.browser.msie||c.browser.msie&&9<=c.browser.version?f.css({"-webkit-background-size":a.width+"px "+a.height+"px","-moz-background-size":a.width+"px "+a.height+"px","-o-background-size":a.width+"px "+a.height+"px","-ms-background-size":a.width+"px "+a.height+"px","background-size":a.width+"px "+a.height+"px"}):8==c.browser.version&&f.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+ d.current_imgInside.attr("src")+"',sizingMethod='scale')"})));a.enableTouchScreen&&(h=Math.floor(1E5*Math.random()),f.wrap('<div id="bannerWithThumbnailsParent_'+h+'" style="position:relative;" />'),c("#bannerWithThumbnailsParent_"+h).width(a.width+1),c("#bannerWithThumbnailsParent_"+h).height(a.height),f.css({cursor:"url("+a.absUrl+"skins/hand.cur),url("+a.absUrl+"skins/hand.cur),move",left:"0px",position:"absolute"}),rightVal=parseInt(n.css("right").substring(0,n.css("right").length-2),10),f.mousedown(function(){rightVal= parseInt(n.css("right").substring(0,n.css("right").length-2),10);if(rightVal<0&&!A){n.css("visibility","hidden");k.css("visibility","hidden");n.css("right","0")}}),f.mouseup(function(){A=false;if(rightVal<0){n.css("right",rightVal+"px");n.css("visibility","visible");k.css("visibility","visible")}}),f.draggable({axis:"x",containment:"parent",start:function(){origLeft=c(this).css("left")},stop:function(){if(!d.effectIsRunning){finalLeft=c(this).css("left");direction=1;origLeft<finalLeft&&(direction= -1);C(direction,d,w,f,y,o,m,p,r,a,t,l)}if(rightVal<0){n.css("right",rightVal+"px");n.css("visibility","visible");k.css("visibility","visible")}c(this).css("left","0px")}}));J(d,a,b,v);f.bind("effectComplete",function(){d.effectIsRunning=false;if(x.indexOf("ipad")!=-1||x.indexOf("iphone")!=-1||x.indexOf("ipod")!=-1||x.indexOf("webos")!=-1||c.browser.msie&&c.browser.version<=7){c("#curBgImgIos",f).attr("src",d.current_imgInside.attr("src"));c("#curBgImgIos",f).width(a.width);c("#curBgImgIos",f).height(a.height)}else{f.css("background", 'url("'+d.current_imgInside.attr("src")+'") no-repeat');a.responsive&&(!c.browser.msie||c.browser.msie&&c.browser.version>=9?f.css({"-webkit-background-size":a.width+"px "+a.height+"px","-moz-background-size":a.width+"px "+a.height+"px","-o-background-size":a.width+"px "+a.height+"px","-ms-background-size":a.width+"px "+a.height+"px","background-size":a.width+"px "+a.height+"px"}):c.browser.version==8&&f.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d.current_imgInside.attr("src")+ "',sizingMethod='scale')"}))}d.arcInitialTime=(new Date).getTime();d.timeElapsed=0;if(a.showCircleTimer){clearInterval(d.intervalID);d.ctx.clearRect(0,0,d.canvas.width,d.canvas.height);d.ctx.beginPath();d.ctx.globalAlpha=a.behindCircleAlpha/100;d.ctx.arc(a.circleRadius+2*a.circleLineWidth,a.circleRadius+2*a.circleLineWidth,a.circleRadius,0,2*Math.PI,false);d.ctx.lineWidth=a.circleLineWidth+2;d.ctx.strokeStyle=a.behindCircleColor;d.ctx.stroke();d.ctx.beginPath();d.ctx.globalAlpha=a.circleAlpha/100; d.ctx.arc(a.circleRadius+2*a.circleLineWidth,a.circleRadius+2*a.circleLineWidth,a.circleRadius,0,0,false);d.ctx.lineWidth=a.circleLineWidth;d.ctx.strokeStyle=a.circleColor;d.ctx.stroke();d.intervalID=setInterval(function(){K(d,a)},125)}J(d,a,b,v);if(a.autoPlay>0&&t>1&&!d.mouseOverBanner){clearTimeout(d.timeoutID);d.timeoutID=setTimeout(function(){C(1,d,w,f,y,o,m,p,r,a,t,l)},a.autoPlay*1E3)}});f.mouseenter(function(){d.mouseOverBanner=true;clearTimeout(d.timeoutID);nowx=(new Date).getTime();d.timeElapsed= d.timeElapsed+(nowx-d.arcInitialTime);if(a.autoHideNavArrows&&a.showNavArrows){k.css("display","block");n.css("display","block")}a.autoHideThumbs&&a.showThumbs&&u.css("display","block")});f.mouseleave(function(){d.mouseOverBanner=false;nowx=(new Date).getTime();if(a.autoHideNavArrows&&a.showNavArrows){k.css("display","none");n.css("display","none")}a.autoHideThumbs&&a.showThumbs&&u.css("display","none");if(a.autoPlay>0&&t>1){clearTimeout(d.timeoutID);d.arcInitialTime=(new Date).getTime();var b=parseInt(a.autoPlay* 1E3-(d.timeElapsed+nowx-d.arcInitialTime),10);d.timeoutID=setTimeout(function(){C(1,d,w,f,y,o,m,p,r,a,t,l)},b)}});f.click(function(){if(c(o[d.current_img_no]).attr("data-link")!=void 0&&c(o[d.current_img_no]).attr("data-link")!=""&&!d.effectIsRunning&&!A){var b=a.target;c(o[d.current_img_no]).attr("data-target")!=void 0&&c(o[d.current_img_no]).attr("data-target")!=""&&(b=c(o[d.current_img_no]).attr("data-target"));b=="_blank"?window.open(c(o[d.current_img_no]).attr("data-link")):window.location=c(o[d.current_img_no]).attr("data-link")}}); k.mousedown(function(){A=true;if(!d.effectIsRunning){clearTimeout(d.timeoutID);C(-1,d,w,f,y,o,m,p,r,a,t,l)}});k.mouseup(function(){A=false});n.mousedown(function(){A=true;if(!d.effectIsRunning){clearTimeout(d.timeoutID);C(1,d,w,f,y,o,m,p,r,a,t,l)}});n.mouseup(function(){A=false});var z=!1;c(window).resize(function(){doResizeNow=true;if(navigator.userAgent.indexOf("Android")!=-1){if(a.windowOrientationScreenSize0==0&&window.orientation==0)a.windowOrientationScreenSize0=c(window).width();if(a.windowOrientationScreenSize90== 0&&window.orientation==90)a.windowOrientationScreenSize90=c(window).height();if(a.windowOrientationScreenSize_90==0&&window.orientation==-90)a.windowOrientationScreenSize_90=c(window).height();a.windowOrientationScreenSize0&&(window.orientation==0&&c(window).width()>a.windowOrientationScreenSize0)&&(doResizeNow=false);a.windowOrientationScreenSize90&&(window.orientation==90&&c(window).height()>a.windowOrientationScreenSize90)&&(doResizeNow=false);a.windowOrientationScreenSize_90&&(window.orientation== -90&&c(window).height()>a.windowOrientationScreenSize_90)&&(doResizeNow=false);if(d.windowWidth==0){doResizeNow=false;d.windowWidth=c(window).width()}}c.browser.msie&&(parseInt(c.browser.version,10)==9&&d.windowWidth==0)&&(doResizeNow=false);if(d.windowWidth==c(window).width()){doResizeNow=false;if(a.windowCurOrientation!=window.orientation&&navigator.userAgent.indexOf("Android")!=-1){a.windowCurOrientation=window.orientation;doResizeNow=true}}else d.windowWidth=c(window).width();if(a.responsive&& doResizeNow){z!==false&&clearTimeout(z);z=setTimeout(function(){var e=a,h=t,n=v,s=y,z=l,A=c("body").css("overflow");c("body").css("overflow","hidden");if(e.enableTouchScreen){responsiveWidth=b.parent().parent().parent().width();responsiveHeight=b.parent().parent().parent().height()}else{responsiveWidth=b.parent().parent().width();responsiveHeight=b.parent().parent().height()}if(e.responsiveRelativeToBrowser){responsiveWidth=c(window).width();responsiveHeight=c(window).height()}if(e.width100Proc)e.width= responsiveWidth;if(e.height100Proc)e.height=responsiveHeight;if(e.origWidth!=responsiveWidth||e.width100Proc){if(e.origWidth>responsiveWidth||e.width100Proc)e.width=responsiveWidth;else if(!e.width100Proc)e.width=e.origWidth;if(!e.height100Proc)e.height=e.width/d.bannerRatio;e.width=parseInt(e.width,10);e.height=parseInt(e.height,10);if(e.enableTouchScreen&&e.responsive)e.width=e.width-1;f.width(e.width);f.height(e.height);if(x.indexOf("ipad")!=-1||x.indexOf("iphone")!=-1||x.indexOf("ipod")!=-1|| x.indexOf("webos")!=-1||c.browser.msie&&c.browser.version<=7){c("#curBgImgIos",f).attr("src",d.current_imgInside.attr("src"));c("#curBgImgIos",f).width(e.width);c("#curBgImgIos",f).height(e.height)}else!c.browser.msie||c.browser.msie&&c.browser.version>=9?f.css({"-webkit-background-size":e.width+"px "+e.height+"px","-moz-background-size":e.width+"px "+e.height+"px","-o-background-size":e.width+"px "+e.height+"px","-ms-background-size":e.width+"px "+e.height+"px","background-size":e.width+"px "+e.height+ "px"}):c.browser.version==8&&f.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d.current_imgInside.attr("src")+"',sizingMethod='scale')"});if(e.enableTouchScreen){f.parent().width(e.width+1);f.parent().height(e.height)}n.css("margin-top",parseInt((e.height-k.height())/2,10)+"px");for(i=0;i<h;i++)c(c(o[i]).attr("data-text-id")).css("width",b.width()+"px");N(d,e,h,f,s,m,p,r,z,g,u);clearTimeout(d.timeoutID);C(1,d,w,f,s,o,m,p,r,e,h,z)}c("body").css("overflow",A)},300)}});y=c(".thumbsHolder_ThumbOFF", f);y.mousedown(function(){A=true;if(!d.effectIsRunning){var b=c(this).attr("rel");c(y[d.current_img_no]).removeClass("thumbsHolder_ThumbON");d.bottomNavClicked=true;d.current_img_no=b-1;C(1,d,w,f,y,o,m,p,r,a,t,l)}});y.mouseup(function(){A=false});y.mouseenter(function(){var a=c(this);a.attr("rel");a.addClass("thumbsHolder_ThumbON")});y.mouseleave(function(){var a=c(this),b=a.attr("rel");d.current_img_no!=b&&a.removeClass("thumbsHolder_ThumbON")});p.click(function(){A=true;if(!d.isCarouselScrolling){B= m.css("left").substr(0,m.css("left").lastIndexOf("px"));B<0&&F(1,m,p,r,a,t,l,d)}});r.click(function(){A=true;if(!d.isCarouselScrolling){B=m.css("left").substr(0,m.css("left").lastIndexOf("px"));Math.abs(B-d.carouselStep)<(l.width()+d.thumbMarginLeft)*t&&F(-1,m,p,r,a,t,l,d)}});c(y[d.current_img_no]).addClass("thumbsHolder_ThumbON");0<a.autoPlay&&1<t&&(a.showCircleTimer&&(d.intervalID=setInterval(function(){K(d,a)},125)),d.timeoutID=setTimeout(function(){C(1,d,w,f,y,o,m,p,r,a,t,l)},1E3*a.autoPlay))})}; c.fn.myReverse=[].reverse;c.fn.allinone_thumbnailsBanner.defaults={skin:"cool",width:960,height:384,width100Proc:!1,height100Proc:!1,randomizeImages:!1,firstImg:0,numberOfStripes:20,numberOfRows:5,numberOfColumns:10,defaultEffect:"random",effectDuration:0.5,autoPlay:4,loop:!0,target:"_blank",showAllControllers:!0,showNavArrows:!0,showOnInitNavArrows:!0,autoHideNavArrows:!0,showThumbs:!0,showOnInitThumbs:!0,autoHideThumbs:!1,thumbsReflection:50,enableTouchScreen:!0,absUrl:"",showCircleTimer:!0,showCircleTimerIE8IE7:!1, circleRadius:10,circleLineWidth:4,circleColor:"#FF0000",circleAlpha:100,behindCircleColor:"#000000",behindCircleAlpha:50,responsive:!1,responsiveRelativeToBrowser:!0,numberOfThumbsPerScreen:0,thumbsOnMarginTop:0,thumbsWrapperMarginTop:0,origWidth:0,origHeight:0,origThumbW:0,origThumbH:0,origthumbsHolderWrapperH:121,origthumbsHolder_MarginTop:0,windowOrientationScreenSize0:0,windowOrientationScreenSize90:0,windowOrientationScreenSize_90:0,windowCurOrientation:0}})(jQuery);